{% extends 'base.html' %}

{% block content %}
    <h1> Suivre d'autres utilisateurs</h1>
    <form id="search_users" method="post" action="{% url 'search-users' %}">
        {% csrf_token %}
        <input type="text" name="search" maxlength="25" value="" placeholder="Nom d'utilisateur">
        <button class="btn" type='submit'>Envoyer</button>
    </form>

    <ul>
        {% for user in found_users %}
        <form method="post" action="{% url 'subscribe-user' %}">
            {% csrf_token %}
            <input name="username" type="hidden" value="{{ user.username }}">
            <li><p>
                {{ user.username }}--<button type="submit" >S'abonner</button>
                </p></li>
        </form>
        {% endfor %}
    </ul>
    
    <div class="abonnements">
        <h2>Abonnements</h2>
        <div
            {% for user_follow in users_follow %}
                {{ user_follow.followed_user }}
                    <form method="POST" action="{% url 'unsubscribe-user' user_follow.id %}">
                        {% csrf_token %}
                        <button type='submit'>Se desabonner</button>
                    </form>
            {%  endfor %}
    </div>
    
    <div class="abonnes">
        <h2>Abonn√©s</h2>
        {% for followed_by_user in followed_by %}
            <p>{{ followed_by_user.user}}</p>
        {%  endfor %}
    </div>
{% endblock content %}